git clone git@github.com:sonia-auv/ros_sonia_ws.git $ROS_SONIA_WS
cd $ROS_SONIA_WS
git checkout develop
$ROS_SONIA_WS/git_update.sh
sudo ldconfig

## setup ros
sudo rosdep init
rosdep update

## apply patch
cd ~
mkdir patch
cd patch
wget http://sonia-auv.readthedocs.org/assets/files/patch.tar.gz -O ./patch.tar.gz
tar -xvf ./patch.tar.gz
sudo patch /usr/include/mlpack/methods/kmeans/kmeans_impl.hpp kmeans.patch
sudo patch /opt/ros/kinetic/include/opencv-3.3.1/opencv2/core/traits.hpp traits.patch
cd ..
rm -rf patch
cd $ROS_SONIA_WS

## compile
catkin_make -j8 -DCMAKE_CXX_FLAGS="-O2"
source devel/setup.bash
